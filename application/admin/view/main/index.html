{layout name='base'}

<div class="row">
    <div class="col-lg-3">
        <div class="card">
            <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-comment-alt color-success border-success"></i></div>
                <div class="stat-content dib">
                    <div class="stat-text">帖子数</div>
                    <div class="stat-digit">{$post_list|count}</div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="card">
            <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-user color-primary border-primary"></i></div>
                <div class="stat-content dib">
                    <div class="stat-text">New Customer</div>
                    <div class="stat-digit">961</div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="card">
            <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-layout-grid2 color-pink border-pink"></i></div>
                <div class="stat-content dib">
                    <div class="stat-text">Active Projects</div>
                    <div class="stat-digit">770</div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="card">
            <div class="stat-widget-one">
                <div class="stat-icon dib"><i class="ti-link color-danger border-danger"></i></div>
                <div class="stat-content dib">
                    <div class="stat-text">Referral</div>
                    <div class="stat-digit">2,781</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card row">
    <div id="post" class="col-md-6" style="height:500px;"></div>
    <div class="col-md-6">
        <h4>接口列表</h4>
        <table class="table table-responsive">
            <thead>
            <tr>
                <th>路径</th>
                <th>请求方式</th>
                <th>详细说明</th>
            </tr>
            </thead>
            <tbody class="url">

            </tbody>
        </table>

        <script>
            new Promise(resolve => {
                $.get("/static/tsconfig.json",function (res) {
                    resolve(res.url);
                })
            }).then(data=>{
                data.forEach(item=>{
                    $(".url").append(`
                        <tr>
                            <td>${item.port}</td>
                            <td><span class="badge ${item.method==='get'?'badge-success':'badge-danger'}">${item.method.toUpperCase()}</span></td>
                            <td>${item.explain}</td>
                        </tr>
                    `)
                })
            })

        </script>
    </div>
</div>

<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    let myChart = echarts.init(document.getElementById('post'));

    myChart.setOption(option = {
        title: {
            text: '帖子占比',
            left: 'center',
            top: 20,
            textStyle: {
                color: '#ccc'
            }
        },
        tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },

        visualMap: {
            show: false,
            min: 80,
            max: 600,
            inRange: {

            }
        },
    });

    myChart.setOption({
        series : [
            {
                name:'帖子',
                type:'pie',
                radius : '55%',
                center: ['50%', '50%'],
                data:[
                    /*{volist name='classify_list' id='classify'}*/
                        {value:'{$classify.post_num}',name:'{$classify.name}'},
                    /*{/volist}*/
                ].sort(function (a, b) { return a.value - b.value; }),
                roseType: 'radius',
                label: {
                    normal: {
                        textStyle: {
                            color: '#000'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        lineStyle: {
                            color: '#000'
                        },
                    }
                },
                itemStyle: {
                    normal: {
                        color: "#009688",
                        shadowBlur: 200,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                },
                animationType: 'scale',
                animationEasing: 'elasticOut',
                animationDelay: function (idx) {
                    return Math.random() * 200;
                }
            }
        ]
    });

</script>